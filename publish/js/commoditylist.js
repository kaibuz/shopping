"use strict";!function(){var s=[],o=document.getElementById("paginationContainer");QF.pGet("../php/getgoods.php",{}).then(function(t){if(t.error)throw new Error("请求失败");s=t.msg,new Pagination(o,t.msg,0,6).display(function(t){console.log(t);var o='<ul style="width:100%;" class="flex-column list-group list-group-horizontal-sm no-gutters" >';return t.forEach(function(t){o+='<li class="list-group-item " style="padding:0 10px; border: none;">\n\t\t\t\t\t\t                <div class="d-flex bd-highlight mb-3">\n\t\t\t\t\t\t                    <img src="'+t.goods_small_logo+'" class="p-2 bd-highlight " alt="...">\n\t\t\t\t\t\t                    <div class=" p-2 bd-highlight col-sm-8">\n\t\t\t\t\t\t                        <p class=""><a style="display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 3;overflow: hidden; " href="../html/detail.html?id='+t.goods_id+'">'+t.goods_name+'</a></p>\n\t\t\t\t\t\t                        <p class="d-flex justify-content-between align-items-center"><span>￥'+t.goods_price+'</span>\n\t\t\t\t\t\t                        <button type="button" data-id="'+t.goods_id+'" class="btn btn-primary">加入购物车</button>\n\t\t\t\t\t\t\t\t\t\t\t    </p>\n\t\t\t\t\t\t                    </div>\n\t\t\t\t\t\t                </div>\n\t\t\t\t\t\t\t        </li>'}),o+="</ul>"})}).catch(function(t){console.log(t)}),o.onclick=function(t){if("button"===t.target.tagName.toLowerCase()){var o=t.target.getAttribute("data-id");console.log("当前按钮,商品id是"+o);var n=s.find(function(t){return t.goods_id===o}),i=localStorage.getItem("shoppingCart")||"[]",e=JSON.parse(i),l=e.find(function(t){return t.goods_id===o});l?l.count++:(n.count=1,e.push(n)),localStorage.setItem("shoppingCart",JSON.stringify(e)),location.href="../html/shoppingCart.html"}}}();